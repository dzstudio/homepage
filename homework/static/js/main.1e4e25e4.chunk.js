(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,a){e.exports=a(288)},158:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"agentResourceAdd",function(){return b}),a.d(n,"agentResourceDel",function(){return h});var r=a(0),l=a.n(r),c=a(6),o=a.n(c),s=(a(157),a(158),a(86)),i=a(46),u=a(137),m=a(138),d=a(69),g=a(115),p=Object(i.c)({routing:m.routerReducer,agents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.agentId,n=t.name,r=t.names;switch(t.type){case"agent/resource/add":var l=e.agentList.map(function(e){if(e.id===a){var t=r.map(function(e){return e.trim()});t=t.filter(function(e){return e.length>0});var n=[].concat(Object(g.a)(e.resources),Object(g.a)(t));return n=Array.from(new Set(n)),Object(d.a)({},e,{resources:n})}return e});return Object(d.a)({},e,{agentList:l});case"agent/resource/delete":var c=e.agentList.map(function(e){if(e.id===a){var t=e.resources.filter(function(e){return e!==n});return Object(d.a)({},e,{resources:t})}return e});return Object(d.a)({},e,{agentList:c});default:return e}}}),b=function(e,t){return{type:"agent/resource/add",agentId:e,names:t}},h=function(e,t){return{type:"agent/resource/delete",agentId:e,name:t}},E=a(34),f=a(47),v=a(10),y=a(11),j=a(13),O=a(12),k=a(14),w=function(e,t){var a=sessionStorage.getItem("login_token");return!(!a||"string"!=typeof a)},A=a(289),R=a(290),C=a(291),N=a(16),S=a(49),T=a(296),L=function(e){function t(e,a){var n;Object(v.a)(this,t),(n=Object(j.a)(this,Object(O.a)(t).call(this,e))).handleClick=function(e){n.setState({navigateTo:e.key})};var r=sessionStorage.getItem("login_token");return n.state={userToken:r,navigateTo:""},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({navigateTo:""})}},{key:"render",value:function(){return l.a.createElement("header",{id:"navbar",className:"boxed"},this.state.navigateTo.length>0?l.a.createElement(f.a,{to:this.state.navigateTo}):"",l.a.createElement(A.a,{className:"row text-right"},l.a.createElement(R.a,{id:"navbarLogo",span:6},l.a.createElement("label",null,"Cruise")),l.a.createElement(R.a,{span:18},l.a.createElement(A.a,{className:"row text-right"},l.a.createElement(R.a,null,l.a.createElement("label",null,"Signed in as ",l.a.createElement(E.b,{to:"/profile"},this.state.userToken)),l.a.createElement(C.a,{onConfirm:this.props.onLogout,placement:"bottomRight",title:"Are you sure to logout\uff1f",icon:l.a.createElement(N.a,{type:"question-circle-o",style:{color:"red"}})},l.a.createElement(S.a,{type:"link"},l.a.createElement(N.a,{type:"caret-right",style:{color:"#1890ff"}}),"Sign out")))),l.a.createElement(A.a,{className:"row text-right"},l.a.createElement(R.a,null,l.a.createElement(T.b,{selectedKeys:[this.props.selectedTab],onClick:this.handleClick},l.a.createElement(T.b.Item,{key:"/dashboard"},l.a.createElement(N.a,{type:"home"}),"DASHBOARD"),l.a.createElement(T.b.Item,{key:"/mycruise"},l.a.createElement(N.a,{type:"schedule"}),"MY CRUISE"),l.a.createElement(T.b.Item,{key:"/agents"},l.a.createElement(N.a,{type:"solution"}),"AGENTS"),l.a.createElement(T.b.Item,{key:"/help"},l.a.createElement(N.a,{type:"question-circle"}),"HELP")))))))}}]),t}(r.Component),I=function(){return l.a.createElement("div",{id:"pageFooter"},l.a.createElement("label",null,"Front end homework. Copyright \u5f20\u9ece 2019-5-11. React, Redux, Antd inside."))},_=function(e){function t(e,a){var n;Object(v.a)(this,t);var r=(n=Object(j.a)(this,Object(O.a)(t).call(this,e,a))).props.location.pathname;return n.state={isLogin:w(),selectedTab:"/"===r?"/agents":r},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.location.pathname;this.setState({selectedTab:"/"===t?"/agents":t})}},{key:"onLogout",value:function(){sessionStorage.removeItem("login_token"),this.setState({isLogin:!1})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(L,{selectedTab:this.state.selectedTab,onLogout:function(){e.onLogout()}}),l.a.createElement("div",{id:"mainContent"},this.state.isLogin?l.a.createElement(f.d,null,l.a.createElement(f.b,{exact:!0,path:"/",component:z}),l.a.createElement(f.b,{path:"/agents",component:z}),l.a.createElement(f.b,{path:"/dashboard",component:q}),l.a.createElement(f.b,{path:"/mycruise",component:J}),l.a.createElement(f.b,{path:"/help",component:U}),l.a.createElement(f.b,{path:"/profile",component:G})):l.a.createElement(f.a,{to:"/login"})),l.a.createElement(I,null))}}]),t}(r.Component),x=a(294),D=a(292),V=a(295);var F=function(e){function t(e,a){var n;return Object(v.a)(this,t),(n=Object(j.a)(this,Object(O.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){if(!e){var a=t.username;sessionStorage.setItem("login_token",a),n.setState({loading:!0}),setTimeout(function(){n.setState({loginSuccess:!0})},1200)}})},n.state={loading:!1,loginSuccess:!1},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldsError,r=t.getFieldError,c=t.isFieldTouched,o=c("username")&&r("username"),s=c("password")&&r("password");return l.a.createElement("div",{id:"loginPage"},l.a.createElement("div",{className:"login-header"},l.a.createElement("label",null,"Front End Homework - \u5f20\u9ece 0510")),this.state.loginSuccess?l.a.createElement(f.a,{to:"/"}):"",l.a.createElement(D.a,{spinning:this.state.loading},l.a.createElement(x.a,{onSubmit:this.handleSubmit,className:"login-form"},l.a.createElement(x.a.Item,{validateStatus:o?"error":"",help:o||""},a("username",{rules:[{required:!0,message:"Please input your username!"}]})(l.a.createElement(V.a,{prefix:l.a.createElement(N.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),l.a.createElement(x.a.Item,{validateStatus:s?"error":"",help:s||""},a("password",{rules:[{required:!0,message:"Please input your password!"}]})(l.a.createElement(V.a,{prefix:l.a.createElement(N.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),l.a.createElement(x.a.Item,null,l.a.createElement(S.a,{type:"primary",htmlType:"submit",disabled:(e=n(),Object.keys(e).some(function(t){return e[t]}))},"Log in")),l.a.createElement(x.a.Item,null,l.a.createElement("label",null,"Tips: Mock data, you can input any word.")))))}}]),t}(r.Component),P=(a(285),function(e){function t(e,a){return Object(v.a)(this,t),Object(j.a)(this,Object(O.a)(t).call(this,e))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=x.a.create({name:"login_form"})(F);return l.a.createElement(e,null)}}]),t}(r.Component)),q=function(e){function t(e,a){return Object(v.a)(this,t),Object(j.a)(this,Object(O.a)(t).call(this,e))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return l.a.createElement("div",{className:"to-be-done"},l.a.createElement("p",null,"Dashboard"),l.a.createElement("p",null,"Coming soon~"))}}]),t}(r.Component),W=function(){return l.a.createElement("div",{id:"agentsFilter"},l.a.createElement("label",null,"Agents"),l.a.createElement(S.a,null,"All"),l.a.createElement(S.a,{type:"primary"},"Physical"),l.a.createElement(S.a,null,"Virtual"))},M=a(293),H=function(e){function t(e,a){var n;return Object(v.a)(this,t),(n=Object(j.a)(this,Object(O.a)(t).call(this,e))).handleVisibleChange=function(e){n.setState({showAddResView:e})},n.hideAddResView=function(){n.setState({showAddResView:!1,resourcesName:""})},n.onResourcesNameChange=function(e){n.setState({resourcesName:e.target.value})},n.confirmAddRes=function(){var e=n.props,t=e.agent,a=e.onAddRes,r=n.state.resourcesName.trim().split(",");r.length>0&&(a(t.id,r),n.hideAddResView())},n.state={showAddResView:!1,resourcesName:""},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({navigateTo:""})}},{key:"render",value:function(){var e=this.props,t=e.agent,a=e.onDelRes;return l.a.createElement("div",{className:"building"===t.status?"building agent-item":"idle agent-item"},l.a.createElement("div",{className:"agent-thumb"},l.a.createElement("div",null)),l.a.createElement("div",{className:"agent-operation"},"idle"!==t.status?"":l.a.createElement(S.a,{icon:"stop",type:"link",size:"small"},"Deny")),l.a.createElement("div",{className:"agent-content"},l.a.createElement("div",{className:"agent-content-desc"},l.a.createElement("label",{className:"agent-email"},t.email),l.a.createElement("label",{className:"agent-info"},"| ",t.status," | ",t.ip," | ",t.target)),l.a.createElement("div",null,l.a.createElement(M.a,{content:l.a.createElement("div",null,l.a.createElement(V.a,{placeholder:"Resources name",allowClear:!0,value:this.state.resourcesName,onChange:this.onResourcesNameChange}),l.a.createElement(S.a,{type:"link",onClick:this.confirmAddRes,style:{marginTop:10,paddingLeft:0}},"Add Resources"),l.a.createElement(S.a,{type:"link",onClick:this.hideAddResView},"Close")),title:"(separate multiple resources name with commas)",visible:this.state.showAddResView,onVisibleChange:this.handleVisibleChange,placement:"bottomLeft",trigger:"click"},l.a.createElement(S.a,{type:"primary",ghost:!0,icon:"plus-circle",size:"small"},"Specify Resources")),l.a.createElement("label",{className:"agent-res-title"},"| Resources:"),t.resources.map(function(e){return l.a.createElement(C.a,{key:e,onConfirm:function(){a(t.id,e)},title:"Are you sure to delete this resource?",icon:l.a.createElement(N.a,{type:"question-circle-o",style:{color:"red"}})},l.a.createElement(S.a,{className:"agent-res",type:"link",size:"small"},e,l.a.createElement(N.a,{type:"close-circle"})))}))))}}]),t}(r.Component),B=function(e){var t=e.summary;return l.a.createElement("div",{className:"agent-summary"},l.a.createElement("label",{className:"agent-summary-title"},"Summary"),l.a.createElement("div",{className:"agent-summary-content"},l.a.createElement("p",null,l.a.createElement("label",null,"building"),l.a.createElement("span",null,t.building)),l.a.createElement("p",null,l.a.createElement("label",null,"idle"),l.a.createElement("span",null,t.idle))),l.a.createElement("label",{className:"agent-summary-title"},"History"),l.a.createElement("div",{className:"agent-summary-content"},t.history.map(function(e,t){return l.a.createElement("p",{key:t},l.a.createElement("label",null,e))})))};a(286);var z=Object(s.b)(function(e,t){return{agents:e.agents.agentList,summary:e.agents.summary}},function(e,t){return{onAddAgentRes:function(t,a){e(n.agentResourceAdd(t,a))},onDelAgentRes:function(t,a){e(n.agentResourceDel(t,a))}}})(function(e){var t=e.agents,a=e.summary,n=e.onAddAgentRes,r=e.onDelAgentRes;return l.a.createElement("div",null,l.a.createElement(W,null),l.a.createElement(A.a,{id:"agentContent",className:"row"},l.a.createElement(R.a,{id:"agentList",span:18},t.map(function(e){return l.a.createElement(H,{key:e.id,agent:e,onAddRes:n,onDelRes:r})})),l.a.createElement(R.a,{id:"agentSummary",span:6},l.a.createElement(B,{summary:a}))))}),J=function(e){function t(e,a){return Object(v.a)(this,t),Object(j.a)(this,Object(O.a)(t).call(this,e))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return l.a.createElement("div",{className:"to-be-done"},l.a.createElement("p",null,"My Cruise"),l.a.createElement("p",null,"Coming soon~"))}}]),t}(r.Component),U=function(e){function t(e,a){return Object(v.a)(this,t),Object(j.a)(this,Object(O.a)(t).call(this,e))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return l.a.createElement("div",{className:"to-be-done"},l.a.createElement("p",null,"Help"),l.a.createElement("p",null,"Coming soon~"))}}]),t}(r.Component),G=function(e){function t(e,a){return Object(v.a)(this,t),Object(j.a)(this,Object(O.a)(t).call(this,e))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"to-be-done"},l.a.createElement("p",null,"Profile"),l.a.createElement("p",null,"Coming soon~"))}}]),t}(r.Component),K=(a(287),function(e){function t(e,a){return Object(v.a)(this,t),Object(j.a)(this,Object(O.a)(t).call(this,e))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"notfound-desc"},"Opps - The page you are looking for is not here~ ",l.a.createElement("br",null),l.a.createElement(E.b,{to:"/"},"Back to Home"))}}]),t}(r.Component)),Y=function(){return l.a.createElement(E.a,null,l.a.createElement(f.d,null,l.a.createElement(f.b,{exact:!0,path:"/",component:_}),l.a.createElement(f.b,{path:"/(agents|dashboard|mycruise|help|profile)/",component:_}),l.a.createElement(f.b,{path:"/login",component:P}),l.a.createElement(f.b,{component:K})))},$=Object(i.a)(u.a)(i.d)(p,{agents:{summary:{building:2,idle:2,history:["bjstdmngbgr02/Acceptance_test","bjstdmngbgr02/Acceptance_test","bjstdmngbgr02/Acceptance_test","bjstdmngbgr02/Acceptance_test","bjstdmngbgr02/Acceptance_test","bjstdmngbgr02/Acceptance_test","bjstdmngbgr02/Acceptance_test","bjstdmngbgr02/Acceptance_test","bjstdmngbgr02/Acceptance_test","bjstdmngbgr02/Acceptance_test"]},agentList:[{id:1,email:"bjstmngbgr02.thoughtworks.com",status:"idle",ip:"192.168.1.2",resources:["firefox3","core-duo","chrome","mysql"],target:"/var/lib/cruise-agent"},{id:2,email:"bjstmngbgr03.thoughtworks.com",status:"building",ip:"192.168.1.2",resources:["firefox3","mysql","core-duo"],target:"/var/lib/cruise-agent"},{id:3,email:"bjstmngbgr04.thoughtworks.com",status:"building",ip:"192.168.1.3",resources:["firefox3","mysql","core-duo"],target:"/var/lib/cruise-agent"},{id:4,email:"bjstmngbgr05.thoughtworks.com",status:"idle",ip:"192.168.1.4",resources:[],target:"/var/lib/cruise-agent"}]}});var Q=function(){return l.a.createElement(s.a,{store:$},l.a.createElement(Y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[152,1,2]]]);
//# sourceMappingURL=main.1e4e25e4.chunk.js.map